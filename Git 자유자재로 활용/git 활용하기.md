# Git 자유자재로 활용하기

## git reset후 돌아오려면?

`git reset`으로 과거의 커밋으로 이동하면 그 사이의 커밋들은 사라지는 것일까?

**결론적으론 그렇지 않다.** 단지 HEAD가 가리키던 브랜치가 새로운 커밋을 가리키는 것일뿐 커밋들이 삭제되는 것은 아니다. 그렇다면 다시 원래의 커밋으로 reset하려면 어떻게 해야할까?

```
git reset [옵션] [커밋 아이디]
```

를 통해 최신 커밋으로 리셋할수도 있지만 이렇게 하기 위해선 `git history`로 커밋 아이디를 알고있어야 한다. 이보단 아래 명령어를 사용하면 수월한데

```
git reflog
```

`reflog`는 `refernce log`의 줄임말인데 이는 '헤드가 이때까지 가리켜왔던 커밋'들을 기록한 정보이다. 해당 명령어를 실행하면 헤드가 가리켜왔던 커밋들의 리스트가 쭉 출력되는데, 이를 확인하고 마찬가지로

```
git reset [옵션] [커밋 아이디]
```

명령어를 실행하면 된다.

## 커밋 히스토리를 보는 다양한 방법

이전에 명시한대로 커밋의 로그를 한줄로 정리하여 보기 위해선

```
git log --pretty=oneline
```

명령어를 실행하면되고 지금까지는 이를 `git history`로 aliasing 하여 사용해왔다. 이를 통해 출력되는 결과물을 보면 현재 브랜치에 해댱하는 내용들만 출력되는데 만약 현재 브랜치뿐만이 아닌 전체 브랜치에 관한 모든 내용을 확인하기 위해선 뒤에 `--all` 옵션을 추가로 붙여주면 되는데 즉,

```
git log --pretty=oneline -all
```

이런식으로 사용하면 된다. 실행하면 모든 브랜치에 대한 커밋 히스토리를 확인할 수 있지만 각 브랜치에 대한 커밋 로그들을 구분하여 보기가 힘들다는 단점이 있다. 이를 해결하기 위해서 git은 `--graph` 옵션을 제공하는데, 이를 활용하면 커밋 히스토리가 각 브랜치와의 관계가 잘 드러나도록 그래프 형식으로 출력이된다.

<img src = "./image1.png">

위의 사진을 보면 별표 하나가 각각 커밋 하나씩이며, 갈라진 부분은 여러 브랜치로 코드 관리 흐름이 갈라지는 모습이다. 반대로 두 선이 하나로 합쳐지는 모습은 merge되는 부분이다.

위의 사진처럼 해당 명령어를 사용하면 커밋과 브랜치의 흐름을 좀 더 정확하게 볼 수 있기 때문에 자주 쓰이는 옵션 중 하나이다.

## Git GUI 환경에서 사용

지금까지 CLI(Command Line Interface) 환경에서 Git을 사용했지만
GUI(Graphic User Interface) 환경에서 Git을 사용하도록 도와주는 프로그램도 있다. 대표적인 프로그램들은 GitKraken, Sourcetree 등이며 이 중에서도 꽤 널리 쓰이고 있는 프로그램은 **Sourcetree**이다.

Sourcetree는 Atlassian이라는 회사에서 만든 프로그램으로 깔끔하고 직관적인 UI로 유명한데, 아래 링크에서 다운받을 수 있다.

- https://www.sourcetreeapp.com/

이런 GUI 프로그램을 사용하면 터미널에 Git 커맨드를 치지 않아도 Git을 사용할 수 있으며 CLI 환경에서 필요했던 커맨드를 몰라도 Git을 사용할 수 있다. 뿐만 아니라 커밋 히스토리를 터미널에서 봤던 커밋 히스토리보다 더 깔끔한 모습으로 볼 수 있다는 장점도 있다.

하지만 아직 Git 커맨드를 사용하는 방법도 모르는데 바로 이런 프로그램을 사용하는 건 좋지 않다. 일단 커맨드부터 하나씩 배워야 나중에 이런 프로그램을 사용하다가 문제가 생기더라도 현명하게 대처할 수 있기 때문이다.
어느 정도 Git 커맨드에 익숙해진다면 그 후에는 GUI 프로그램도 한번 사용해보면 좋으며 특히, Sourcetree는 실무에서도 많이 쓰이는 프로그램이므로 혹시 Sourcetree를 좀더 제대로 배우고 싶으면 아래 문서를 참고하면 도움이 될 것이다.

- https://support.atlassian.com/bitbucket-cloud/docs/tutorial-learn-bitbucket-with-sourcetree/

또 만약 sourcetree가 아니더라도 아래 링크를 참고하여 원하는 GUI 프로그램을 사용해도 좋다.

- https://git-scm.com/downloads/guis

## git rebase vs merge

`git rebase [브랜치 명]`란 커밋을 재배치하는 것을 뜻하는데, 이는 **현재 위치한 브랜치의 베이스를 해당 브랜치로 재지정**한다는 의미이다. 아래 내용을 좀 더 참고하자.

merge의 경우에는 커밋을 해주지만 rebase의 경우에는 아래 명령어를 사용한다.

```
git rebase --continue
```

위 커맨드는 conflict가 발생해서 제대로 진행되지 못한 리베이스를 계속 진행하라는 의미이다.

해당 명령어를 입력하면 아래와 같은 상태가 되는데

<img src = "./image2.png">

머지했을때처럼 새로운 커밋이 생기는것이 아닌 원래 해당 브랜치에서 작업한 것처럼 보여지는데 이를 좀 더 쉽게 설명하기 위해 아래 사진을 참고하자.

<img src = "./image3.png">

우선 merge 한 경우인데, 이를 보면 새로운 머짓 커밋이 생기는 것을 볼 수 있다. 하지만 rebase를 할 경우는 아래와 같다.

<img src = "./image4.png">

위 사진을 보면 새로운 커밋이 생기는 것이 아닌 마치 preminum 브랜치가 'add get' 함수를 거쳐온 것 처럼 커밋 히스토리의 구조 자체가 바뀌게 된다. 즉, 위의 상황에서는 rebase의 말 뜻 그대로 test 브랜치가 가리키는 커밋을 preminum 브랜치가 자신의 새로운 base로 만드는 것이다.

이를 정리하면 merge와 rebase의 차이는 다음과 같다.

1. rebase는 merge와 달리 새로운 커밋을 만들지 않는다.
2. rebase로 만들어진 커밋 히스토리는 merge로 만들어진 커밋 히스토리보다 좀 더 깔끔
3. rebase나 merge나 결과물은 같음 (커밋 히스토리를 깔끔하게 만들기 위해선 rebase 사용)

`merge` : 두 브랜치를 합쳤다는 정보가 커밋 히스토리에 꼭 남아야하는 경우

`rebase` : 커밋 히스토리를 깔끔하게 유지하는게 더 중요한 경우
